# Gym Membership Management Backend

This is the Flask backend for the Gym Membership Management application. It provides RESTful APIs to manage gym members and connects to a MongoDB database.

## Setup Instructions

1. Install Python 3.7 or higher
2. Create a virtual environment:
   ```bash
   python -m venv venv
   ```
3. Activate the virtual environment:
   - On Windows:
     ```bash
     venv\Scripts\activate
     ```
   - On macOS/Linux:
     ```bash
     source venv/bin/activate
     ```
4. Install the required packages:
   ```bash
   pip install -r requirements.txt
   ```
5. Run the application:
   ```bash
   python app.py
   ```

The backend server will start on `http://localhost:5000`.

## Environment Variables

The application uses the following environment variables, which are defined in the `.env` file:

- `MONGODB_URI`: MongoDB connection string
- `DB_NAME`: Database name (`Members`)
- `COLLECTION_NAME`: Collection name (`Members_List`)
- `FRONTEND_URL`: Frontend URL for CORS configuration (optional, defaults to `http://localhost:5173`)

## API Endpoints

- `GET /` - Health check endpoint
- `GET /api/members` - Get all members
- `GET /api/members/<member_id>` - Get a specific member by ID
- `POST /api/members` - Create a new member
- `PUT /api/members/<member_id>` - Update an existing member
- `DELETE /api/members/<member_id>` - Delete a member

## Data Structure

The member data structure includes the following fields:
- `id`: String (generated by the frontend)
- `profilePicture`: String (optional)
- `name`: String
- `mId`: String (Member ID)
- `mobile`: String
- `trainingType`: String
- `address`: String
- `idProof`: String
- `batch`: String
- `planType`: String
- `purchaseDate`: String (YYYY-MM-DD)
- `expiryDate`: String (YYYY-MM-DD)
- `totalAmount`: Number
- `amountPaid`: Number
- `dueAmount`: Number
- `paymentDetails`: String

## Deployment Instructions

### Deploying to Render (Recommended)

1. Create an account on [Render](https://render.com)
2. Click "New Web Service"
3. Connect your Git repository or upload your code
4. Configure the service:
   - Name: Choose a name for your service
   - Runtime: Python 3
   - Build command: `pip install -r requirements.txt`
   - Start command: `python app.py`
5. Add environment variables in the Render dashboard:
   - `MONGODB_URI`: Your MongoDB connection string
   - `DB_NAME`: Your database name (e.g., `Members`)
   - `COLLECTION_NAME`: Your collection name (e.g., `Members_List`)
   - `FRONTEND_URL`: Your deployed frontend URL (e.g., `https://your-app.netlify.app`)

### Deploying to Heroku

1. Create an account on [Heroku](https://heroku.com)
2. Install the Heroku CLI
3. Log in to Heroku CLI:
   ```bash
   heroku login
   ```
4. Create a new Heroku app:
   ```bash
   heroku create your-app-name
   ```
5. Set environment variables:
   ```bash
   heroku config:set MONGODB_URI=your_mongodb_connection_string
   heroku config:set DB_NAME=Members
   heroku config:set COLLECTION_NAME=Members_List
   heroku config:set FRONTEND_URL=https://your-frontend-url.com
   ```
6. Deploy the application:
   ```bash
   git push heroku main
   ```

### Deploying to Railway

1. Create an account on [Railway](https://railway.app)
2. Create a new project
3. Deploy from your Git repository
4. Configure the service:
   - Build command: `pip install -r requirements.txt`
   - Start command: `python app.py`
5. Add environment variables in the Railway dashboard:
   - `MONGODB_URI`: Your MongoDB connection string
   - `DB_NAME`: Your database name
   - `COLLECTION_NAME`: Your collection name
   - `FRONTEND_URL`: Your deployed frontend URL

## CORS Configuration

The backend is configured to allow CORS requests from:
- `http://localhost:5173` (Vite default)
- `http://localhost:5174` (Alternative Vite port)
- `https://*.netlify.app` (Netlify deployments)
- `https://*.vercel.app` (Vercel deployments)
- Any URL specified in the `FRONTEND_URL` environment variable

For production deployments, it's recommended to set the `FRONTEND_URL` environment variable to your specific frontend URL for better security.